---
import HeaderLink from './HeaderLink.astro';
import { SITE_TITLE } from '../consts';
import { Icon } from 'astro-icon/components';
---

<header>
	<nav>
		<h2>
			<a href="/">{SITE_TITLE}</a>
			<img src="/logo.svg" alt="Site Logo" width="48" height="48" class="site-logo" style="vertical-align:middle; margin-left: 0.5em;" />
		</h2>
		<div class="internal-links">
			<HeaderLink href="/">Home</HeaderLink>
			<HeaderLink href="/blog">Blog</HeaderLink>
			<HeaderLink href="/about">About</HeaderLink>
		</div>
		<div class="social-links">
			<!-- GitHub -->
			<a href="https://github.com/thebiglaskowski" target="_blank">
				<span class="sr-only">View TheBigLaskowski on GitHub</span>
				<Icon name="line-md:github" width="20" height="20" />
			</a>

			<!-- X (Twitter) -->
			<a href="https://x.com/thebiglaskowski" target="_blank">
				<span class="sr-only">Follow TheBigLaskowski on X</span>
				<Icon name="line-md:twitter-x" width="20" height="20" />
			</a>

			<!-- LinkedIn -->
			<a href="https://www.linkedin.com/in/thebiglaskowski" target="_blank">
				<span class="sr-only">Connect on LinkedIn</span>
				<Icon name="line-md:linkedin" width="20" height="20" />
			</a>

			<!-- YouTube -->
			<a href="https://www.youtube.com/@JoeLaskowski" target="_blank">
				<span class="sr-only">Subscribe on YouTube</span>
				<Icon name="line-md:youtube" width="20" height="20" />
			</a>

			<!-- Discord -->
			<a href="https://discord.com/users/bigski#2687" target="_blank">
				<span class="sr-only">Join on Discord</span>
				<Icon name="line-md:discord" width="20" height="20" />
			</a>
		</div>
		<div class="theme-toggle">
			<button id="theme-toggle-btn" type="button" aria-label="Toggle dark mode">
				<span class="icon-sun" style="display:none">
					<!-- Sun SVG -->
					<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
				</span>
				<span class="icon-moon" style="display:none">
					<!-- Moon SVG -->
					<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"/></svg>
				</span>
			</button>
		</div>
	</nav>
</header>

<style>
	header {
		margin: 0;
		padding: 0 1em;
		background: white;
		box-shadow: 0 2px 8px rgba(var(--black), 5%);
	}
	h2 {
		margin: 0;
		font-size: 1em;
	}

	h2 a,
	h2 a.active {
		text-decoration: none;
	}
	nav {
		display: flex;
		align-items: center;
		justify-content: space-between;
	}
	nav a {
		padding: 1em 0.5em;
		color: var(--black);
		border-bottom: 4px solid transparent;
		text-decoration: none;
	}
	nav a.active {
		text-decoration: none;
		border-bottom-color: var(--accent);
	}
	.social-links,
	.social-links a {
		display: flex;
	}
	.social-links svg {
		width: 20px;
		height: 20px;
	}
	.theme-toggle {
		display: flex;
		align-items: center;
		margin-left: 1em;
	}
	#theme-toggle-btn {
		background: none;
		border: none;
		cursor: pointer;
		padding: 0.5em;
		display: flex;
		align-items: center;
	}
	#theme-toggle-btn svg {
		width: 1.5em;
		height: 1.5em;
		color: var(--accent);
	}
	@media (max-width: 720px) {
		.social-links {
			display: none;
		}
	}
</style>

<script is:inline>
(function() {
	const btn = document.getElementById('theme-toggle-btn');
	const sun = btn.querySelector('.icon-sun');
	const moon = btn.querySelector('.icon-moon');
	const root = document.documentElement;
	function setTheme(theme) {
		if (theme === 'dark') {
			root.setAttribute('data-theme', 'dark');
			sun.style.display = '';
			moon.style.display = 'none';
		} else {
			root.removeAttribute('data-theme');
			sun.style.display = 'none';
			moon.style.display = '';
		}
	}
	// Initial
	const saved = localStorage.getItem('theme');
	const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
	setTheme(saved ? saved : (prefersDark ? 'dark' : 'light'));
	btn.addEventListener('click', () => {
		const isDark = root.getAttribute('data-theme') === 'dark';
		const newTheme = isDark ? 'light' : 'dark';
		setTheme(newTheme);
		localStorage.setItem('theme', newTheme);
	});
})();
</script>
